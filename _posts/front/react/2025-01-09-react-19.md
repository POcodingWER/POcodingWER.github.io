---
layout: post
title: "[React] react 19 ë²„ì „ ì£¼ìš” ë³€ê²½ì  ìµœì‹  ê¸°ìˆ "

subtitle: "useActionState, use, useOptimistic, metadata"

date: 2025-01-09 08:36:37
# lastmod: 2024-08-14 10:10:00
author: "lim.Chuck"

# header-style: text

catalog: true
header-mask: 0.4
header-img: "img/post/2025/01/react_19.png"
#
# sitemap:
#   changefreq: daily #ìŠ¤í¬ë© ì£¼ê¸°  daily | weekly | monthly
#   priority: 1.0  # ìŠ¤í¬ë© ìš°ì„ ìˆœìœ„
# hidden: true
categories:
  - ReactGuide
tags:
  - React
  - react 19
  - react 19 ë³€ê²½ì 
  - react 19 ì£¼ìš” ë³€ê²½ì 
  - react 19 ì£¼ìš” ë³€ê²½ì  ìµœì‹  ê¸°ìˆ 
  - useActionState
  - use
  - useOptimistic
  - metadata
---

{% include post/react/contents.md %}

{% raw %}

## 1. ğŸ­ useActionState(ì•¡ì…˜) ì‹œìŠ¤í…œ

```typescript
import { useActionState } from "react";

function SpaceshipLaunchControl() {
  // ğŸ¯ ìš°ì£¼ì„  ë°œì‚¬ ì»¨íŠ¸ë¡¤ ì„¼í„°
  const [error, launchAction, isLaunching] = useActionState(
    async (_, formData: FormData) => {
      const pilotName = formData.get("pilot") as string;

      // ğŸ” ì•ˆì „ ì²´í¬
      if (!pilotName.trim()) {
        return new Error("ğŸš« íŒŒì¼ëŸ¿ ì´ë¦„ì´ í•„ìš”í•©ë‹ˆë‹¤!");
      }

      // ğŸ² ëœë¤ ìš°ì£¼ ì´ë²¤íŠ¸ ë°œìƒ
      if (Math.random() > 0.7) {
        return new Error("âš ï¸ ì†Œí–‰ì„± ë²¨íŠ¸ ë°œê²¬! ë°œì‚¬ ì¤‘ë‹¨!");
      }

      // ğŸ• ë°œì‚¬ ì¹´ìš´íŠ¸ë‹¤ìš´
      await new Promise((resolve) => setTimeout(resolve, 1500));

      console.log("ğŸŒŸ ë°œì‚¬ ì„±ê³µ! íŒŒì¼ëŸ¿:", pilotName);
    }
  );

  return (
    <div style={{ padding: "20px", maxWidth: "500px", margin: "0 auto" }}>
      <h1>ğŸš€ ìš°ì£¼ì„  ë°œì‚¬ í†µì œ ì„¼í„°</h1>

      <form action={launchAction}>
        <input
          name="pilot"
          type="text"
          placeholder="íŒŒì¼ëŸ¿ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
          style={{
            padding: "10px",
            marginRight: "10px",
            borderRadius: "4px",
            border: "1px solid #ccc",
          }}
        />
        <button
          disabled={isLaunching}
          style={{
            padding: "10px 20px",
            backgroundColor: isLaunching ? "#ccc" : "#007bff",
            color: "white",
            border: "none",
            borderRadius: "4px",
            cursor: isLaunching ? "not-allowed" : "pointer",
          }}
        >
          {isLaunching ? "ğŸ”„ ë°œì‚¬ ì¤€ë¹„ ì¤‘..." : "ğŸš€ ë°œì‚¬!"}
        </button>
      </form>

      {/* ğŸ¨ ìƒíƒœ ë””ìŠ¤í”Œë ˆì´ */}
      {error && (
        <p
          style={{
            color: "red",
            marginTop: "15px",
            padding: "10px",
            backgroundColor: "#ffebee",
            borderRadius: "4px",
          }}
        >
          {error.message}
        </p>
      )}

      {isLaunching && (
        <p
          style={{
            color: "#2196f3",
            marginTop: "15px",
            padding: "10px",
            backgroundColor: "#e3f2fd",
            borderRadius: "4px",
          }}
        >
          ğŸ¯ ë°œì‚¬ ì‹œí€€ìŠ¤ ì§„í–‰ ì¤‘...
        </p>
      )}
    </div>
  );
}

export default SpaceshipLaunchControl;
```

![](/img/post/2025/01/react_useActionState.gif)

### ğŸ® ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

1.  ê°„ë‹¨í•œ ë¡œê·¸ì¸

```typescript
const [error, loginAction, isLogging] = useActionState(async (_, formData) => {
  const username = formData.get("username") as string;
  if (!username) return new Error("ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”");
  // ë¡œê·¸ì¸ ë¡œì§...
});
```

2.  íŒŒì¼ ì—…ë¡œë“œ

```typescript
const [error, uploadAction, isUploading] = useActionState(
  async (_, formData) => {
    const file = formData.get("file") as File;
    if (!file) return new Error("íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”");
    // ì—…ë¡œë“œ ë¡œì§...
  }
);
```

âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ì—ëŸ¬ ì²˜ë¦¬**

   - throw ëŒ€ì‹  return new Error() ì‚¬ìš©
   - ì—ëŸ¬ ê°ì²´ëŠ” ìë™ìœ¼ë¡œ error ìƒíƒœë¡œ ì „ë‹¬ë¨

2. **ë¹„ë™ê¸° ì²˜ë¦¬**

   - async/await ì‚¬ìš© ê°€ëŠ¥
   - Promise ì²˜ë¦¬ ì¤‘ì—ëŠ” isPendingì´ true

3. **í¼ ë°ì´í„°**

   - inputì˜ name ì†ì„± í•„ìˆ˜
   - FormData ê°ì²´ë¡œ ìë™ ì „ë‹¬

4. **íƒ€ì… ì•ˆì „ì„±**
   - FormData.get()ì˜ ë°˜í™˜ê°’ì€ íƒ€ì… ë‹¨ì–¸ í•„ìš”

## 2. ğŸš€React 19 use Hook ì™„ë²½ ê°€ì´ë“œ!

use Hookì€ React 19ì—ì„œ ë„ì…ëœ ìƒˆë¡œìš´ í›…ìœ¼ë¡œ, Promiseë¥¼ ì§ì ‘ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

```typescript
import { Suspense, use } from "react";

// 1ï¸âƒ£ Promiseë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
function fetchSpaceData(type: "planets" | "astronauts" | "ships") {
  return new Promise<string[]>((resolve) => {
    setTimeout(() => {
      const data = {
        planets: ["ìˆ˜ì„±", "ê¸ˆì„±", "ì§€êµ¬", "í™”ì„±", "ëª©ì„±"],
        astronauts: ["ë‹ ì•”ìŠ¤íŠ¸ë¡±", "ìœ ë¦¬ ê°€ê°€ë¦°", "ì´ì†Œì—°"],
        ships: ["ì•„í´ë¡œ 11í˜¸", "ìŠ¤í˜ì´ìŠ¤X", "ì†Œìœ ì¦ˆ"],
      };
      resolve(data[type]);
    }, 1500);
  });
}

// 2ï¸âƒ£ Promise ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (ì¤‘ìš”!)
const planetsPromise = fetchSpaceData("planets");
const astronautsPromise = fetchSpaceData("astronauts");
const shipsPromise = fetchSpaceData("ships");

// 3ï¸âƒ£ ë°ì´í„°ë¥¼ í‘œì‹œí•  ì»´í¬ë„ŒíŠ¸
function SpaceInfo({
  promise,
  title,
}: {
  promise: Promise<string[]>;
  title: string;
}) {
  const data = use(promise);
  return (
    <div>
      <h3>{title}</h3>
      <ul>
        {data.map((item, index) => (
          <li key={index}>{item}</li>
        ))}
      </ul>
    </div>
  );
}

// 4ï¸âƒ£ ë©”ì¸ ì»´í¬ë„ŒíŠ¸
function App() {
  return (
    <div style={{ maxWidth: "600px", margin: "20px auto" }}>
      <h1>ğŸŒŒ ìš°ì£¼ ë°ì´í„° ë·°ì–´</h1>

      <Suspense fallback={<div>ğŸš€ í–‰ì„± ë°ì´í„° ë¡œë”© ì¤‘...</div>}>
        <SpaceInfo promise={planetsPromise} title="í–‰ì„± ëª©ë¡" />
      </Suspense>

      <Suspense fallback={<div>ğŸ‘¨â€ğŸš€ ìš°ì£¼ì¸ ë°ì´í„° ë¡œë”© ì¤‘...</div>}>
        <SpaceInfo promise={astronautsPromise} title="ìš°ì£¼ì¸ ëª©ë¡" />
      </Suspense>

      <Suspense fallback={<div>ğŸ›¸ ìš°ì£¼ì„  ë°ì´í„° ë¡œë”© ì¤‘...</div>}>
        <SpaceInfo promise={shipsPromise} title="ìš°ì£¼ì„  ëª©ë¡" />
      </Suspense>
    </div>
  );
}

export default App;
```

![](/img/post/2025/01/react_use.gif)

### ğŸ® ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

1.  ë‹¨ìˆœ ë°ì´í„° ë¡œë”©

```typescript
function UserProfile({ id }: { id: number }) {
  const user = use(fetchUser(id));
  return <div>{user.name}</div>;
}
```

2.  ë³‘ë ¬ ë°ì´í„° ë¡œë”©

```typescript
function Dashboard() {
  const users = use(fetchUsers());
  const posts = use(fetchPosts());
  return (
    <>
      <UserList users={users} />
      <PostList posts={posts} />
    </>
  );
}
```

âš ï¸ ì£¼ì˜ì‚¬í•­

1. **Suspense í•„ìˆ˜**

   - use Hookì„ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” ë°˜ë“œì‹œ Suspenseë¡œ ê°ì‹¸ì•¼ í•¨
   - ë¡œë”© ìƒíƒœ ì²˜ë¦¬ë¥¼ ìœ„í•´ í•„ìš”

2. **Promise ìºì‹±**

   - ë™ì¼í•œ PromiseëŠ” ìºì‹œë¨
   - ìƒˆë¡œìš´ ë°ì´í„°ê°€ í•„ìš”í•˜ë©´ ìƒˆ Promise ìƒì„± í•„ìš”

3. **ì—ëŸ¬ ì²˜ë¦¬**

   - ErrorBoundaryì™€ í•¨ê»˜ ì‚¬ìš© ê¶Œì¥
   - Promise reject ì‹œ ìë™ìœ¼ë¡œ ì—ëŸ¬ ì²˜ë¦¬

4. **ì„œë²„ ì»´í¬ë„ŒíŠ¸ í˜¸í™˜**
   - ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥
   - í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ëª¨ë‘ì—ì„œ ë™ì‘

ğŸŒŸ ì¥ì 

1. **ì½”ë“œ ê°„ì†Œí™”**

   - useState + useEffect ì¡°í•© ì œê±°
   - ë” ì„ ì–¸ì ì¸ ë°ì´í„° ë¡œë”©

2. **ì„±ëŠ¥ ìµœì í™”**

   - ìë™ Suspense í†µí•©
   - íš¨ìœ¨ì ì¸ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬

3. **ë” ë‚˜ì€ UX**
   - ë¡œë”© ìƒíƒœ ìë™ ì²˜ë¦¬
   - ìŠ¤ë¬´ìŠ¤í•œ ì „í™˜ íš¨ê³¼

## 3. ğŸ¯useOptimisticì´ë€?

```typescript
import { useState, useOptimistic } from "react";
import "./App.css";

function App() {
  // 1ï¸âƒ£ ì‹¤ì œ ì´ë¦„ ìƒíƒœ
  const [name, setName] = useState("(ì•„ì§ ì´ë¦„ì´ ì—†ì–´ìš”!)");

  // 2ï¸âƒ£ ë‚™ê´€ì  UIë¥¼ ìœ„í•œ ìƒíƒœ
  const [optimisticName, setOptimisticName] = useOptimistic(name);

  // 3ï¸âƒ£ í¼ ì œì¶œ ì²˜ë¦¬
  async function submitAction(formData: FormData) {
    const newName = formData.get("name") as string;

    if (!newName.trim()) {
      alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ™");
      return;
    }

    // 4ï¸âƒ£ ë‚™ê´€ì  ì—…ë°ì´íŠ¸ (ì¦‰ì‹œ ë°˜ì˜)
    setOptimisticName("â³ " + newName);

    // 5ï¸âƒ£ ì„œë²„ ìš”ì²­ ì‹œë®¬ë ˆì´ì…˜ (1ì´ˆ ëŒ€ê¸°)
    await new Promise((resolve) => setTimeout(resolve, 1000));

    // 6ï¸âƒ£ ì‹¤ì œ ìƒíƒœ ì—…ë°ì´íŠ¸
    setName("âœ… " + newName);
  }

  return (
    <div>
      <h1>âœ¨ ì´ë¦„ ë³€ê²½ ë§ˆë²•ì‚¬ âœ¨</h1>

      <div>
        <h2>í˜„ì¬ ì´ë¦„:</h2>
        <p>{optimisticName}</p>
      </div>

      <form action={submitAction}>
        <div>
          <label>
            <span>ìƒˆë¡œìš´ ì´ë¦„:</span>
            <input
              name="name"
              type="text"
              placeholder="ì—¬ê¸°ì— ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
            />
          </label>
          <button type="submit">âœ¨ ë³€ê²½í•˜ê¸°</button>
        </div>
      </form>

      <div>
        <p>
          ğŸ’¡ <strong>ì‘ë™ ë°©ì‹:</strong>
        </p>
        <ol>
          <li>ì´ë¦„ì„ ì…ë ¥í•˜ê³  ë³€ê²½í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</li>
          <li>ì¦‰ì‹œ â³ ëª¨ë˜ì‹œê³„ì™€ í•¨ê»˜ ì„ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤</li>
          <li>1ì´ˆ í›„ âœ“ ì²´í¬ë§ˆí¬ì™€ í•¨ê»˜ ìµœì¢… ë°˜ì˜ë©ë‹ˆë‹¤</li>
        </ol>
      </div>
    </div>
  );
}

export default App;
```

![](/img/post/2025/01/react_useOptimistic.gif)

### ğŸ® ì‚¬ìš© ë°©ë²•

1.  ê¸°ë³¸ êµ¬ë¬¸

```typescript
const [optimisticState, setOptimisticState] = useOptimistic(currentState);
```

2.  ì—…ë°ì´íŠ¸ íŒ¨í„´

```typescript
// ë‚™ê´€ì  ì—…ë°ì´íŠ¸
setOptimisticState(newValue);

// ì‹¤ì œ ì—…ë°ì´íŠ¸
setCurrentState(finalValue);
```

### ğŸ¯ í™œìš© ì‚¬ë¡€

1.  ì¢‹ì•„ìš” ë²„íŠ¼

```typescript
setOptimisticLikes(likes + 1); // ì¦‰ì‹œ ì¦ê°€
await updateLikes(); // ì„œë²„ ë°˜ì˜
```

2.  í¼ ì œì¶œ

```typescript
setOptimisticStatus("ì €ì¥ ì¤‘..."); // ì¦‰ì‹œ í‘œì‹œ
await saveData(); // ë°ì´í„° ì €ì¥
```

âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ìƒíƒœ ì •í•©ì„±**

   - ì‹¤ì œ ìƒíƒœì™€ ë™ê¸°í™” í•„ìš”
   - ì—ëŸ¬ ì²˜ë¦¬ ê³ ë ¤

2. **ì‚¬ìš©ì ê²½í—˜**

   - ì ì ˆí•œ ë¡œë”© í‘œì‹œ
   - ì‹¤íŒ¨ ì‹œ í”¼ë“œë°±

3. **ì„±ëŠ¥ ê³ ë ¤**
   - ë¶ˆí•„ìš”í•œ ì—…ë°ì´íŠ¸ ë°©ì§€
   - ë©”ëª¨ë¦¬ ì‚¬ìš© ìµœì í™”

ğŸŒŸ ì¥ì 

1. **í–¥ìƒëœ UX**

   - ì¦‰ê°ì ì¸ í”¼ë“œë°±
   - ìì—°ìŠ¤ëŸ¬ìš´ ì „í™˜

2. **ê°œë°œ í¸ì˜ì„±**

   - ê°„ë‹¨í•œ API
   - ì§ê´€ì ì¸ ì‚¬ìš©ë²•

3. **ì•ˆì •ì„±**
   - ìë™ ìƒíƒœ ê´€ë¦¬
   - ì—ëŸ¬ ë³µêµ¬ ê¸°ëŠ¥

## 4. ğŸ“š React 19ì˜ ë©”íƒ€ë°ì´í„° & ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ì™„ë²½ ê°€ì´ë“œ!

#### 1. Document ë©”íƒ€ë°ì´í„° ì§€ì›

React 19ì—ì„œëŠ” ë©”íƒ€ë°ì´í„° íƒœê·¸ë¥¼ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§ì ‘ ë Œë”ë§í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.

1ï¸âƒ£ ê¸°ë³¸ ì‚¬ìš©ë²•

```typescript:src/app/blog/[id]/page.tsx
function BlogPost({ post }) {
  return (
    <article>
      {/* ë©”íƒ€ë°ì´í„° íƒœê·¸ë“¤ì´ ìë™ìœ¼ë¡œ <head>ë¡œ ì´ë™ë©ë‹ˆë‹¤ */}
      <title>{post.title}</title>
      <meta name="description" content={post.description} />
      <meta name="keywords" content={post.keywords} />
      <link rel="canonical" href={`https://mysite.com/blog/${post.id}`} />

      {/* ì‹¤ì œ ì½˜í…ì¸  */}
      <h1>{post.title}</h1>
      <p>{post.content}</p>
    </article>
  )
}
```

#### 2. ìŠ¤íƒ€ì¼ì‹œíŠ¸ ê´€ë¦¬

1ï¸âƒ£ precedenceë¥¼ í†µí•œ ìŠ¤íƒ€ì¼ì‹œíŠ¸ ìš°ì„ ìˆœìœ„ ê´€ë¦¬

```typescript:src/components/Layout.tsx
function Layout() {
  return (
    <>
      {/* ë†’ì€ ìš°ì„ ìˆœìœ„ ìŠ¤íƒ€ì¼ */}
      <link
        rel="stylesheet"
        href="/critical.css"
        precedence="high"
      />

      {/* ê¸°ë³¸ ìš°ì„ ìˆœìœ„ ìŠ¤íƒ€ì¼ */}
      <link
        rel="stylesheet"
        href="/main.css"
        precedence="default"
      />

      <main>
        {/* ì»¨í…ì¸  */}
      </main>
    </>
  )
}
```

2ï¸âƒ£ Suspenseì™€ í•¨ê»˜ ì‚¬ìš©

```typescript:src/components/DynamicContent.tsx
function DynamicContent() {
  return (
    <Suspense fallback={<Loading />}>
      <link
        rel="stylesheet"
        href="/dynamic-styles.css"
        precedence="default"
      />
      <DynamicComponent />
    </Suspense>
  )
}
```

#### 3. ë¦¬ì†ŒìŠ¤ í”„ë¦¬ë¡œë”©

1ï¸âƒ£ ë‹¤ì–‘í•œ í”„ë¦¬ë¡œë”© API

```typescript:src/components/ResourceLoader.tsx
import {
  prefetchDNS,
  preconnect,
  preload,
  preinit
} from 'react-dom'

function ResourceLoader() {
  // ìŠ¤í¬ë¦½íŠ¸ ë¯¸ë¦¬ ë¡œë“œ & ì‹¤í–‰
  preinit('https://example.com/script.js', {
    as: 'script'
  })

  // í°íŠ¸ ë¯¸ë¦¬ ë¡œë“œ
  preload('https://example.com/font.woff2', {
    as: 'font'
  })

  // DNS ë¯¸ë¦¬ ì¡°íšŒ
  prefetchDNS('https://api.example.com')

  // ì—°ê²° ë¯¸ë¦¬ ìˆ˜ë¦½
  preconnect('https://api.example.com')

  return <div>ì»¨í…ì¸ ...</div>
}
```

#### 4. ì£¼ìš” íŠ¹ì§•

1.  ë©”íƒ€ë°ì´í„°

- ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì§ì ‘ ì„ ì–¸
- ìë™ìœ¼ë¡œ `<head>`ë¡œ ì´ë™
- SSR & CSR ëª¨ë‘ ì§€ì›

2.  ìŠ¤íƒ€ì¼ì‹œíŠ¸

- ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ë¡œë”©
- ìë™ ì¤‘ë³µ ì œê±°
- Suspense í†µí•©

3.  ë¦¬ì†ŒìŠ¤ ìµœì í™”

- ë‹¤ì–‘í•œ í”„ë¦¬ë¡œë”© ì˜µì…˜
- ì„±ëŠ¥ ìµœì í™”
- ìë™ ìš°ì„ ìˆœìœ„ ì„¤ì •

âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ë©”íƒ€ë°ì´í„°**

   - ë³µì¡í•œ ë©”íƒ€ë°ì´í„°ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ê³ ë ¤
   - SEO ìš”êµ¬ì‚¬í•­ í™•ì¸

2. **ìŠ¤íƒ€ì¼ì‹œíŠ¸**

   - precedence ê°’ ì‹ ì¤‘íˆ ì„¤ì •
   - ë¡œë”© ìˆœì„œ ê³ ë ¤

3. **ë¦¬ì†ŒìŠ¤**
   - ê³¼ë„í•œ í”„ë¦¬ë¡œë”© ì£¼ì˜
   - ëŒ€ì—­í­ ê³ ë ¤

ğŸŒŸ ì¥ì 

1. **ê°œë°œ í¸ì˜ì„±**

   - ì„ ì–¸ì  ë©”íƒ€ë°ì´í„°
   - ê°„ë‹¨í•œ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬

2. **ì„±ëŠ¥ ìµœì í™”**

   - ìë™ ìµœì í™”
   - íš¨ìœ¨ì ì¸ ë¡œë”©

3. **ìœ ì§€ë³´ìˆ˜**
   - ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ê´€ë¦¬
   - ëª…í™•í•œ ì˜ì¡´ì„±

[React 19 ê³µì‹ ë¸”ë¡œê·¸](https://react.dev/blog/2024/12/05/react-19)ë¥¼ ì°¸ê³ í•˜ì—¬ ìµœì‹  ê¸°ëŠ¥ë“¤ì„ ì ê·¹ í™œìš©í•´ë³´ì„¸ìš”! ğŸ˜Š

{% endraw %}
