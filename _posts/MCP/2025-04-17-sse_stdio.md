---
layout: post
title: "[MCP] í†µì‹  êµ¬ì¡° flow ì‹¬ì¸µë¶„ì„"

subtitle: "MCP í†µì‹  flow í†µì‹ ê·œì•½ ì‹¬ì¸µë¶„ì„"

date: 2025-04-17 08:20:33

# lastmod: 2024-08-14 10:10:00
author: "lim.Chuck"
# header-style: text
catalog: true
header-mask: 0.4
header-img: "img/post/2025/04/mcp_flow.png"

# sitemap:
# changefreq: daily #ìŠ¤í¬ë© ì£¼ê¸° daily | weekly | monthly
# priority: 1.0 # ìŠ¤í¬ë© ìš°ì„ ìˆœìœ„
# hidden: true

categories:
  - MCP

tags:
  - MCP
  - AI
  - LLM
  - Claude
  - Cursor
  - MCP ì‚¬ìš©ë²•
  - ê°œë°œìë„êµ¬
  - AIí†µí•©
  - í†µì‹ ê·œì•½
  - server í†µì‹  ê·œì•½
  - MCP flow
  - MCP í†µì‹ ê·œê²©
---

{% include post/mcp_contents.md %}

> í†µì‹  í”„ë¡œí† ì½œì€ AIì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„œë¡œ ëŒ€í™”í•˜ëŠ” ì–¸ì–´ì™€ ê°™ìŠµë‹ˆë‹¤. ê°ê°ì˜ í”„ë¡œí† ì½œì€ ì €ë§ˆë‹¤ì˜ ê°•ì ê³¼ íŠ¹ì„±ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ëª©ì ì— ë§ê²Œ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

## ğŸ”Œ MCP í†µì‹  êµ¬ì¡° ì‹¬ì¸µ ë¶„ì„

![](/img/post/2025/04/mcp_flow.png)

> MCP(Model Context Protocol)ëŠ” AI ëª¨ë¸ê³¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°„ì˜ í‘œì¤€í™”ëœ í†µì‹  ë°©ì‹ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ í”„ë¡œí† ì½œì˜ í†µì‹  êµ¬ì¡°ì™€ ë©”ì‹œì§€ íë¦„ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

#### ğŸ›ï¸ í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ì•„í‚¤í…ì²˜

MCPëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì„¸ ê°€ì§€ ì£¼ìš” êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì§„ ì•„í‚¤í…ì²˜ë¥¼ ê°€ì§‘ë‹ˆë‹¤:

- **ğŸ–¥ï¸ í˜¸ìŠ¤íŠ¸(Host)**: LLM ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì£¼ë¡œ í•´ë‹¹ë˜ë©°, ì—°ê²°ì„ ì´ˆê¸°í™”í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
- **ğŸ”„ í´ë¼ì´ì–¸íŠ¸(Client)**: ì„œë²„ì™€ 1:1 ì—°ê²°ì„ ìœ ì§€í•˜ë©° í†µì‹ í•˜ëŠ” ì—­í• ë¡œ, í˜¸ìŠ¤íŠ¸ ë‚´ì— ì¡´ì¬í•©ë‹ˆë‹¤.
- **âš™ï¸ ì„œë²„(Server)**: ì»¨í…ìŠ¤íŠ¸, íˆ´, í”„ë¡¬í”„íŠ¸ ë“±ì˜ ì •ë³´ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

#### ğŸ“¨ ë©”ì‹œì§€ í”„ë¡œí† ì½œ í˜•ì‹

MCPì˜ ë©”ì‹œì§€ í”„ë¡œí† ì½œì€ `JSON-RPC 2.0` êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, ë‹¤ìŒ ì„¸ ê°€ì§€ í˜•íƒœë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

1. **ğŸ“¤ Requests**: ëª…ë ¹ ì‹¤í–‰ì„ ìœ„í•œ ìš”ì²­ ë©”ì‹œì§€
2. **ğŸ“¥ Responses**: ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ë©”ì‹œì§€
3. **ğŸ”” Notifications**: ì‘ë‹µì„ ë°›ì§€ ì•ŠëŠ” ë‹¨ë°©í–¥ í†µì§€ ë©”ì‹œì§€

#### ğŸ”„ í†µì‹  íë¦„

MCPì˜ í†µì‹  ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì§„í–‰ë©ë‹ˆë‹¤:

1. **ğŸš€ ì´ˆê¸°í™”(Initialization)**: ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ ì—°ê²° ì„¤ì •
2. **âš¡ ì‹¤í–‰(Operation)**: ì‹¤ì œ ë°ì´í„° ë° ëª…ë ¹ êµí™˜
3. **ğŸ”š ì¢…ë£Œ(Shutdown)**: ì—°ê²° ì¢…ë£Œ ë° ì •ë¦¬

### ğŸ“¦ MCP ê·œê²©ìœ¼ë¡œ í†µì‹ í•  ìˆ˜ ìˆëŠ” ë°ì´í„° ìœ í˜•

MCPì—ì„œëŠ” ë‹¤ì–‘í•œ í˜•íƒœì˜ ë°ì´í„°ë¥¼ ì „ì†¡í•  ìˆ˜ ìˆìœ¼ë©°, ê° ìœ í˜•ë³„ë¡œ íŠ¹í™”ëœ í†µì‹  ê·œê²©ì´ ìˆìŠµë‹ˆë‹¤.

#### ğŸ“‚ ë¦¬ì†ŒìŠ¤(Resources) í†µì‹  ê·œê²©

ë¦¬ì†ŒìŠ¤ í†µì‹ ì€ **ì„œë²„ì—ì„œ LLM(í´ë¼ì´ì–¸íŠ¸)ìœ¼ë¡œ ë‹¨ìˆœ ë°ì´í„°ë¥¼ ì „ë‹¬**í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì—°ì‚°ì´ ê±°ì˜ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©°, ë°ì´í„° ì „ë‹¬ì´ ì£¼ëœ ëª©ì ì…ë‹ˆë‹¤.

**ğŸ’¼ ë¦¬ì†ŒìŠ¤ í†µì‹  ì˜ˆì‹œ**:

- ğŸ“„ íŒŒì¼ ë‚´ìš©
- ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ë ˆì½”ë“œ
- ğŸŒ API ì‘ë‹µ
- ğŸ“Š ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ë°ì´í„°
- ğŸ–¼ï¸ ìŠ¤í¬ë¦°ìƒ·, ì´ë¯¸ì§€
- ğŸ“ ë¡œê·¸ íŒŒì¼

#### ğŸ› ï¸ íˆ´(Tools) í†µì‹  ê·œê²©

íˆ´ í†µì‹ ì€ **ì„œë²„ì—ì„œ ì—°ì‚°ì„ ì²˜ë¦¬í•œ ë’¤ ê·¸ ê²°ê³¼ë¥¼ LLM(í´ë¼ì´ì–¸íŠ¸)ìœ¼ë¡œ ì „ë‹¬**í•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤. ë°ì´í„° ì „ë‹¬ë„ í¬í•¨í•˜ì§€ë§Œ, ì£¼ëœ ëª©ì ì€ ì—°ì‚° ì²˜ë¦¬ì…ë‹ˆë‹¤.

**ğŸ§° íˆ´ í†µì‹  ì˜ˆì‹œ**:

- ğŸŒ¤ï¸ ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ ì¡°íšŒ
- ğŸ“ˆ ë°ì´í„° ë¶„ì„ ê²°ê³¼
- ğŸ” ì›¹ ê²€ìƒ‰ ê²°ê³¼
- ğŸ™ ê¹ƒí—™ ì´ìŠˆ ìƒì„±

#### ğŸ’¬ í”„ë¡¬í”„íŠ¸(Prompts) í†µì‹  ê·œê²©

í”„ë¡¬í”„íŠ¸ í†µì‹ ì€ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ê³¼ ì›Œí¬í”Œë¡œìš°ë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. LLMì—ê²Œ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ì§€ì‹œí•˜ëŠ” ëª…ë ¹ì–´ ì§‘í•©ì„ ì „ë‹¬í•©ë‹ˆë‹¤.

#### ğŸ² ìƒ˜í”Œë§(Sampling) í†µì‹  ê·œê²©

ìƒ˜í”Œë§ í†µì‹ ì€ **LLM(í´ë¼ì´ì–¸íŠ¸)ì´ ì„œë²„ì—ê²Œ ë°ì´í„°ì˜ ìƒ˜í”Œì„ ìš”ì²­**í•˜ëŠ” ê·œê²©ì…ë‹ˆë‹¤. ì„œë²„ëŠ” LLMì˜ ìš”ì²­ì— ë”°ë¼ ì ì ˆí•œ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ìƒì„±í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤.

**ğŸ§© ìƒ˜í”Œë§ í†µì‹  ì˜ˆì‹œ**:

- ğŸ–¼ï¸ ì´ë¯¸ì§€ ìƒ˜í”Œë§
- ğŸ“ í…ìŠ¤íŠ¸ ìƒ˜í”Œë§
- ğŸ“Š ë°ì´í„° ìƒ˜í”Œ ìƒì„±

#### ğŸŒ± ë£¨íŠ¸(Roots) í†µì‹  ê·œê²©

ë£¨íŠ¸ í†µì‹  ê·œê²©ì€ **URIì˜ ê¸°ë³¸ ê²½ë¡œë¥¼ ë°˜í™˜**í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì£¼ë¡œ ë¦¬ì†ŒìŠ¤ ìœ„ì¹˜ë‚˜ API ì—”ë“œí¬ì¸íŠ¸ì˜ ê¸°ë³¸ ê²½ë¡œë¥¼ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

#### ğŸšš ì „ì†¡(Transports) í†µì‹  ê·œê²©

ì „ì†¡ í†µì‹  ê·œê²©ì€ **MCPê°€ í†µì‹ í•˜ëŠ” ë©”ì‹œì§€ í”„ë¡œí† ì½œ**ì¸ `Requests`, `Responses`, `Notifications`ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ëŠ” MCPì˜ í†µì‹  ê³„ì¸µì„ ë‹´ë‹¹í•˜ëŠ” ê·œê²©ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ğŸšš ì „ì†¡(Transports) í†µì‹           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¤ Requests  â†’ ëª…ë ¹ ì‹¤í–‰ì„ ìœ„í•œ ìš”ì²­        â”‚
â”‚ ğŸ“¥ Responses â†’ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ             â”‚
â”‚ ğŸ”” Notifications â†’ ë‹¨ë°©í–¥ í†µì§€ ë©”ì‹œì§€       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”Œ Model Context Protocolì—ì„œ ì‚¬ìš©í•˜ëŠ” í†µì‹  ë°©ì‹

> [WEB í†µì‹  ê·œì•½ ì¢…ë¥˜ stdio, sseê°€ ê¶ê¸ˆí•˜ë‹¤ë©´!!!!!](/api/2025/04/17/web-protocol/)

Model Context Protocol(MCP)ì€ ë‹¤ì–‘í•œ í†µì‹  í”„ë¡œí† ì½œì„ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆì§€ë§Œ, ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì£¼ë¡œ ë‘ ê°€ì§€ í†µì‹  ë°©ì‹ì´ ê°€ì¥ ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤:

### 1. ğŸ”„ stdio(í‘œì¤€ ì…ì¶œë ¥) - ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” í†µì‹  ë°©ì‹

- **ì£¼ìš” ìš©ë„**: ë¡œì»¬ MCP ì„œë²„ì™€ í†µì‹ í•  ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë¨
- **ì¥ì **:
  - âœ… êµ¬í˜„ì´ ë‹¨ìˆœí•˜ê³  ì§ê´€ì 
  - âœ… ë³„ë„ì˜ ë„¤íŠ¸ì›Œí¬ ì„¤ì • ì—†ì´ í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹  ê°€ëŠ¥
  - âœ… ë¡œì»¬ ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ì— ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥
- **ì‚¬ìš© ì‚¬ë¡€**:
  - ğŸ’¼ Claude Desktopì—ì„œ ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼
  - ğŸ’» Cursor IDEì—ì„œ ì½”ë“œ ë¶„ì„ ë° í¸ì§‘
  - ğŸ› ï¸ ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œì˜ MCP ì„œë²„ í†µí•©

### 2. ğŸ“¢ SSE(Server-Sent Events) - ë‘ ë²ˆì§¸ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” í†µì‹  ë°©ì‹

- **ì£¼ìš” ìš©ë„**: ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì´ë²¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ë‹¬í•  ë•Œ ì‚¬ìš©
- **ì¥ì **:
  - âœ… ë‹¨ë°©í–¥ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„ ê°€ëŠ¥
  - âœ… HTTP í‘œì¤€ ê¸°ë°˜ìœ¼ë¡œ ëŒ€ë¶€ë¶„ì˜ í™˜ê²½ì—ì„œ ì§€ì›ë¨
  - âœ… ìë™ ì¬ì—°ê²° ë©”ì»¤ë‹ˆì¦˜ ë‚´ì¥
- **ì‚¬ìš© ì‚¬ë¡€**:
  - ğŸ“Š ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°ì´ í•„ìš”í•œ MCP ì„œë²„
  - ğŸ” ì§€ì†ì ì¸ ëª¨ë‹ˆí„°ë§ ì •ë³´ë¥¼ LLMì—ê²Œ ì œê³µí•´ì•¼ í•˜ëŠ” ê²½ìš°
  - ğŸŒ ì›¹ ê¸°ë°˜ MCP í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„

### ğŸ”§ ê¸°íƒ€ í™œìš©ë˜ëŠ” í†µì‹  ë°©ì‹

- **WebSocket**: ë³µì¡í•œ ì–‘ë°©í–¥ í†µì‹ ì´ í•„ìš”í•œ ê³ ê¸‰ MCP ì„œë²„ êµ¬í˜„ì—ì„œ ì‚¬ìš©
- **HTTP API**: ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ í†µí•©ë˜ëŠ” MCP ì„œë²„ì—ì„œ APIì™€ í†µì‹ í•  ë•Œ ì‚¬ìš©
- **SSH**: ì›ê²© ì„œë²„ì— ì ‘ì†í•˜ì—¬ ëª…ë ¹ì„ ì‹¤í–‰í•˜ëŠ” íŠ¹ìˆ˜í•œ ê²½ìš°ì— ì‚¬ìš©

> ğŸ’¡ **ì°¸ê³ **: MCPì˜ ëª¨ë“  ë©”ì‹œì§€ëŠ” **JSON-RPC 2.0** í˜•ì‹ì„ ë”°ë¥´ì§€ë§Œ, ì´ëŠ” í†µì‹  í”„ë¡œí† ì½œì´ ì•„ë‹Œ ë©”ì‹œì§€ êµ¬ì¡°í™” í˜•ì‹ì…ë‹ˆë‹¤.

## ğŸ“ MCP ë©”ì‹œì§€ ì˜ˆì‹œ

1. ì´ˆê¸°í™” ìš”ì²­ ì˜ˆì‹œ (Initialization Request)

   ```json
   {
     "jsonrpc": "2.0",
     "id": 1,
     "method": "initialize",
     "params": {
       "clientInfo": {
         "name": "claude-desktop",
         "version": "1.0.0"
       },
       "capabilities": {
         "resources": true,
         "tools": true,
         "prompts": true,
         "sampling": true
       }
     }
   }
   ```

1. ë¦¬ì†ŒìŠ¤ ìš”ì²­ ì˜ˆì‹œ (Resource Request)

   ```json
   {
     "jsonrpc": "2.0",
     "id": 2,
     "method": "resources/get",
     "params": {
       "uri": "file:///home/user/documents/example.txt"
     }
   }
   ```

1. íˆ´ ì‹¤í–‰ ìš”ì²­ ì˜ˆì‹œ (Tool Execution Request)

   ```json
   {
     "jsonrpc": "2.0",
     "id": 3,
     "method": "tools/execute",
     "params": {
       "name": "search",
       "arguments": {
         "query": "í˜„ì¬ ì„œìš¸ì˜ ë‚ ì”¨"
       }
     }
   }
   ```

1. ì•Œë¦¼ ë©”ì‹œì§€ ì˜ˆì‹œ (Notification)

   ```json
   {
     "jsonrpc": "2.0",
     "method": "notifications/log",
     "params": {
       "level": "info",
       "message": "ì‚¬ìš©ìê°€ ìƒˆ íŒŒì¼ì„ ì—´ì—ˆìŠµë‹ˆë‹¤"
     }
   }
   ```

1. ì¢…ë£Œ ìš”ì²­ ì˜ˆì‹œ (Shutdown Request)

   ```json
   {
     "jsonrpc": "2.0",
     "id": 10,
     "method": "shutdown",
     "params": {}
   }
   ```
